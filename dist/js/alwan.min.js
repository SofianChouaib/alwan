!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Alwan",[],e):"object"==typeof exports?exports.Alwan=e():t.Alwan=e()}(self,(function(){return function(){"use strict";var t={d:function(e,l){for(var r in l)t.o(l,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:l[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Ot}});const l=document,r=l.body,n=l.documentElement,o="button",s="svg",i="open",a="close",u="color",p="click",c="mousedown",h="scroll",d="keydown",_="input",f="change",w="focusin",g="focusout",m="hex",b="rgb",v="hsl",y="hsv",x="lw-focus",A="lw-btn",L="lw-color",$="remove",H=[m,b,v],{max:O,min:V,round:j,abs:M}=Math,k=parseFloat,S=parseInt,C=(t,e)=>{for(const l in t)if(Object.hasOwnProperty.call(t,l)&&e(t[l],l,t))return!1;return!0},E=(t,...e)=>Object.assign(t,...e),I=(t,e)=>C(t,((t,l)=>!e||e[l]!==t)),z=t=>"string"==typeof t,P=t=>null!=t,T=(t,e,l)=>V(O(t,l||0),e||100),D=(t,e,l)=>{if(t._s.t(e,!0)){let e=t._e.i;e(u,l),e(f,l)}},F=(t,e,r)=>z(t)?t&&(e||l)["querySelector"+(r?"All":"")](t):t instanceof Element?t:null,N=(t,e,l,r,n)=>{r=r||{};const o="http://www.w3.org/"+(t===s?"2000/svg":"1999/xhtml"),i=document.createElementNS(o,t||"div");return e&&(i.className=e),C(r,((t,e)=>{"html"===e?J(i,t):"text"===e?i.innerText=t:t&&i.setAttributeNS("",e,t)})),l&&l.appendChild(i),n&&n(i),i},Z=t=>t&&t.getBoundingClientRect(),q=t=>t.parentElement,B=(t,e)=>q(e).replaceChild(t,e)&&t,K=(t,e)=>t&&q(t).removeChild(t)&&(e?null:t),R=(t,e,l)=>{t&&t.style.setProperty("--"+e,l)},U=(t,e)=>{let l=e&&e.length;null!=l&&(e=l),t.style.display=e?"":"none"},G=(t,e,l)=>{e&&t.classList[l?"add":$](e)},J=(t,e)=>{t.innerHTML=e||""},Q={id:"",classname:"",theme:"light",toggle:!0,popover:!0,position:"bottom-start",margin:8,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:{rgb:!0,hex:!0,hsl:!0},opacity:!0,preview:!0,copy:!0,swatches:[]},W=(t,e)=>{let l=(e?$:"add")+"EventListener",[r,n,o,s]=t;z(n)&&(n=[n]),n.forEach((t=>{r[l](t,o,s)}))},X=(t,e,l,r,n)=>{if(e){let o=[e,l,r,n=n||!1];W(o),t.push(o)}return t},Y=(t,e)=>t.filter((t=>e!==t[0]||W(t,!0))),tt="top",et="right",lt="bottom",rt="left",nt="start",ot="center",st="end",it="width",at="height",ut=t=>{let e,o,s,{config:u,_e:{i:p},_s:_}=t,f=N("","alwan",r),w={e:[]},g=!1,m=[];const b=t=>{var r;g&&(x(),r=e,m.every((t=>{let e=!0;if(t!==l){let{top:l,bottom:n}=Z(r),{top:o,bottom:s}=Z(t);e=l>=o&&s>=n}return e}))||L(!0))},v=t=>{let e=w.e;m.forEach((l=>{e=t(e,l,h,b)})),e=t(e,window,"resize",b),e=t(e,l,[c,d],y),w.e=e},y=l=>{if(g){let r,{target:n,type:o,key:i,shiftKey:a}=l,u=t._c.palette.$;"Escape"===i||o===c&&e!==n&&!f.contains(n)?L():"Tab"===i&&(n!==e||a?(!a&&n===s||n===u&&a)&&(r=e):r=u,r&&(l.preventDefault(),r.focus()))}},x=()=>{o&&o.u()},A=t=>{g||u.disabled||(_.u({},!0),x(),G(f,i,!0),g=!0,!t&&p(i))},L=t=>{g&&u.toggle&&(G(f,i,!1),g=!1,!t&&p(a))},$=t=>{u.disabled=t,t&&L(!0),G(e,"lw-disabled",t)};return E(w,{$:f,p:i=>{i=i||{};let a,u=E(t.config,i),{theme:p,popover:c,target:d,position:_,margin:w,disabled:g,id:b,toggle:y}=u,x=F(d),L=i.color;b&&(f.id=b),C(t._c,(t=>{let e=t._;e&&e(u)})),L&&D(t,L),e=t._c.ref.$,a=x||e,v(Y),$(g),f.dataset.theme=p,y||A(!0),U(e,c||y),c?(o=((t,e,l)=>{l=l||{};let r,o,s,{margin:i,position:a}=l,[u,p]=a?a.split("-"):[],c={[tt]:[tt,lt,et,rt],[lt]:[lt,tt,et,rt],[et]:[et,rt,tt,lt],[rt]:[rt,et,tt,lt]},h={[nt]:[nt,ot,st],[ot]:[ot,nt,st],[st]:[st,ot,nt]};i=null==i?6:k(i),u=c[u]?u:lt,p=p?h[p]?p:nt:ot;const d=(t,l)=>{!1!==l&&(e.style[t?tt:rt]=l+"px")},_=t=>{let e=it,l=et;t&&(e=at,l=lt),d(t,(r[l]-s[e])/2)},f=()=>{r={top:0,left:0,right:n.clientWidth,bottom:n.clientHeight},o=Z(t),s=Z(e),c[u].some((t=>{let e=t===tt||t===lt,l=r[t],n=o[t],a=i+s[e?at:it],u=a<=M(l-n);return u&&(d(e,n+(l?i:-a)),h[p].some((t=>{let l=at,n=tt,i=lt;e&&(l=it,n=rt,i=et);let a=o[n],u=o[i],p=M(r[n]-u),c=M(r[i]-a),h=o[l],_=s[l],f=(_+h)/2,w={[nt]:_<=c&&a,[ot]:f<=p&&f<=c&&u-f,[st]:_<=p&&u-_};return w=w[t],d(!e,w),!1!==w}))||_(!e)),u}))||(_(!0),_())};return f(),{u:f}})(a,f,{position:_,margin:w}),m=(t=>{t=q(t);let e=[l];for(;t!==r;){let l=getComputedStyle(t).overflow;"auto"!==l&&l!==h||e.push(t),t=q(t)}return e})(e),v(X)):a.insertAdjacentElement((x?"before":"after")+"end",f),G(f,"lw-popper",c),s=F("button,input",f,!0),s=s[s.length-1]},m:()=>g,A:A,L:L,H:()=>{g?L():A()},O:$,V:x})},pt={"aria-role":"none",focusable:"false"},ct=(t,e,l,r)=>({width:t,height:e,viewBox:l,html:r}),ht=E(ct("18","18","0 0 24 24",'<path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>'),pt),dt=E(ct("18","18","0 0 24 24",'<path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path>'),pt),_t=E(ct("15","15","0 0 20 20",'<path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path>'),pt),ft=(t,e)=>{const{_s:r,_e:{i:n}}=e,o=N("","alwan__palette",t,{tabindex:"0"}),s=N("","lw-overlay",t);U(s,!1);const i={ArrowRight:1,ArrowLeft:-1},a={ArrowUp:-1,ArrowDown:1},p=(t=>{const e=N("","alwan__marker",t),{width:l,height:r}=Z(e);let n=l/2,o=r/2,s=0,i=0;return{$:e,j:(t,l)=>{s=t,i=l,e.style.transform=`translate(${t-n}px, ${l-o}px)`},M:()=>({x:s,y:i})}})(o);let h,_,f,{j:m}=p,b=[],v=!1;const y=(t,e)=>{m(t,e),r.u({s:t/h,v:1-e/_}),n(u,o)},A=t=>{let e,l,{top:r,left:n}=f,o=t.touches;t.preventDefault(),o&&(t=o[0]),e=t.clientX-n,l=t.clientY-r,e=e<0?0:e>h?h:e,l=l<0?0:l>_?_:l,y(e,l)},L=t=>{({width:h,height:_}=t||Z(o))};return X(b,o,[c,"touchstart"],(t=>{t.touches&&t.touches.length>1||(r.k(),f=Z(o),L(f),A(t),v=!0,U(s,v),o.focus())})),X(b,l,["mousemove","touchmove"],(t=>{!v||t.touches&&t.touches.length>1||A(t)}),{passive:!1}),X(b,l,["mouseup","touchend","touchcancel"],(t=>{v&&(r.S(o),v=!1,U(s,v))})),X(b,o,[g,w],(t=>{let e=!1;t.type===g?o.blur():e=!v,G(o,x,e)})),X(b,o,d,(t=>{G(o,x,!0);let e=t.key;if(i[e]||a[e]){t.preventDefault(),L();let{x:l,y:r}=p.M(),n=l,o=r;l+=(i[e]||0)*(h/100),r+=(a[e]||0)*(_/100),l=l>h?h:l<0?0:l,r=r>_?_:r<0?0:r,l===n&&r===o||y(l,r)}})),{$:o,marker:p,C:t=>{L(),m(t.s*h,(1-t.v)*_)},e:b}},wt=t=>{let e=t.h/60,l=t.s,r=t.v,n=(t,e,l)=>255*(l-l*e*O(0,V(t,4-t,1)));return{r:j(n((5+e)%6,l,r)),g:j(n((3+e)%6,l,r)),b:j(n((1+e)%6,l,r)),a:t.a}},gt=(t,e)=>{let l=t;if(!z(t)){let r="",n="",o=", ";t.a<1&&(r="a",n=o+t.a);let s=e===v?"%":"";l=e+r+"("+t[e[0]]+o+t[e[1]]+s+o+t[e[2]]+s+n+")"}return l},mt=t=>{let e=t.toString(16);return e.length<2?"0"+e:e},bt=({r:t,g:e,b:l,a:r})=>"#"+mt(t)+mt(e)+mt(l)+(r<1?mt(j(255*r)):""),vt=(t,e)=>{e=e?"%":0;let l=t.v,r=l*(1-t.s/2),n=r&&1!==r?(l-r)/V(r,1-r):0;return{h:t.h,s:j(100*n)+e,l:j(100*r)+e,a:j(100*t.a)/100}},yt=N("canvas").getContext("2d"),xt=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?(?:(?:\s+([+-]?\d*\.?\d+)%\s*([+-]?\d*\.?\d+)%(?:\s*\/\s*([+-]?\d*\.?\d+%?))?)|(?:\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%(?:\s*,\s*([+-]?\d*\.?\d+%?))?))\s*\)?$/i,At=/^#[0-9a-f]{6}$/i,Lt=(t,e)=>{let l,r;if((t=t.trim()).length>=10){const e=t.match(xt);if(e){let t=k(e[1]),n=e[2],o=T(e[3]||e[6]),s=T(e[4]||e[7]),i=e[5]||e[8];t*="turn"===n?360:"rad"===n?180/PI:"grad"===n?.9:1;let a=360;t=(j(t)%a+a)%a,i=i?T("%"===i.slice(-1)?k(i)/100:i,1):1,l={h:t,s:o,l:s,a:i},r=v}}if(!l){if(yt.fillStyle="#000",yt.fillStyle=t,t=yt.fillStyle,At.test(t))l={r:S((n=t).slice(1,3),16),g:S(n.slice(3,5),16),b:S(n.slice(5,7),16),a:1};else{let[e,r,n,o]=t.match(/\((.+)\)/)[1].split(",").map((t=>k(t)));l={r:e,g:r,b:n,a:o?j(100*o)/100:1}}r=b}var n;return e?gt(l,r):{I:l,P:r}},$t=(t,e)=>{const l=t=>N("","alwan__container",t);let r=((t,e)=>{const l={$:t,e:[],_(e){let{preset:n,classname:s}=e,{$:i,e:a}=l;a=Y(a,i),n!==(i!==t)&&(i=n?B(N(o,"lw-ref",null,{type:o,id:t.id}),t):B(t,i)),s&&s.split(/\s+/).map((t=>{G(i,t,!0)})),X(a,i,p,r),l.$=i,l.e=a}},r=t=>{e.toggle()};return l})(t,e),n=ut(e),i=n.$,a=ft(i,e),c=l(i),h=((t,e)=>{let l=!1;const r=N("","lw-mr",t),n={e:[],_(t){let{preview:e,copy:l}=t,s=n.$,a=n.cp;e!==!!s&&(s=e?N("","alwan__preview",r):K(s,!0),l&&a&&(s||r).appendChild(a)),l?a||(a=N(o,A,s||r,{type:o},(t=>{i(t)}))):a=K(a,!0),U(r,a||s),n.$=s,n.cp=a}},i=t=>{t=t||n.cp,J(t),N(s,"",t,l?dt:ht)};return X(n.e,r,[p,"mouseleave",w,g],(t=>{if(n.cp&&!e.config.disabled){let r=t.type,o=r===w;l||r!==p?(o||l&&(l=!1,i()),G(n.cp,x,o)):(e._s.T(),l=!0,i())}})),n})(c,e),b=((t,e)=>{const l=N("","lw-w100",t),r=e._s.u,n=(t,e,r)=>N(_,t,l,{type:"range",max:e,step:r}),o={e:[],hue:n("alwan__slider alwan__slider--hue",360),alpha:null,_({opacity:t}){let e=o.alpha;t!==!!e&&(o.alpha=t?n("alwan__slider alwan__slider--alpha",1,.01):K(e,!0)||r({a:1}))},D(t){let{alpha:e,hue:l}=o;l.value=360-t.h,e&&(e.value=t.a)}};return X(o.e,l,[_,f],(t=>{let l=t.target,n=l.valueAsNumber,s={};l===o.hue?s.h=360-n:s.a=n,r(s),e._e.i(t.type===f?f:u,l)})),o})(c,e),v=((t,e)=>{let l,r,n,i,a=[],c=[];const{config:h,_s:g,_e:{i:b}}=e,v={_(e){let i,{inputs:u,format:p}=e;a=H.filter((t=>u[t])),i=a.length,i?(l||(l=N("","alwan__inputs",t)),1===i?r=K(r,!0):r||(r=N(o,A,t,{type:o},(t=>{N(s,"",t,_t)}))),n=O(a.indexOf(p),0),p=a[n]):(l=K(l,!0),r=K(r,!0),p=H.includes(p)?p:H[0]),h.format=p,y(p),U(t,i)},D(t){C(v.$,((e,l)=>{e.value=t[l]}))}},y=t=>{if(v.$={},i=[],l){let{singleInput:e,opacity:r}=h,n=e||t==m?[t]:(t+(r?"a":"")).split("");J(l),n.forEach(((t,e)=>{N("label","lw-label",l,!1,(l=>{v.$[t]=i[e]=N(_,"alwan__input",l,{type:"text"}),N("span","",l,{text:t})}))})),g.u({})}};return X(c,t,p,(t=>{t.target===r&&(n=(n+1)%a.length,h.format=a[n],y(a[n]))})),X(c,t,_,(t=>{let e=t.target.value;if(e.trim()){let t="",l=a[n];t=h.singleInput||l===m?e:l+"("+i.reduce(((t,e)=>(t&&t+",")+e.value),"")+")",g.t(t,v)&&b(u,v.$)}})),X(c,t,[w,f],(t=>{t.type===w?g.k():g.S(v.$)})),X(c,t,d,(t=>{"Enter"===t.key&&e.close()})),v.e=c,v})(l(i),e),y=((t,e)=>{let l,r=N("","alwan__swatches",t);const n=t=>N(o,"alwan__swatch",r,{type:o},(e=>{R(e,L,Lt(t,!0))})),s={e:[],_(t){let e=[];l=t.swatches,U(r,l),J(r),l.forEach(((t,l)=>{e[l]=n(t)})),s.$=e},F(t){let e=l.push(t)-1;s.$[e]=n(t),U(r,l)},N(t){let e=l.findIndex(((e,l)=>t===e||S(t)===l)),n=s.$;e>-1&&(l.splice(e,1),K(n[e]),n.splice(e,1),U(r,l))}};return X(s.e,t,p,(t=>{let l=t.target;q(l)===r&&D(e,l.style.getPropertyValue("--lw-color"),l)})),s})(i,e);return{ref:r,app:n,palette:a,preview:h,sliders:b,inputs:v,swatches:y}},Ht=t=>{let e,n={h:0,s:0,v:0,a:1},o=wt(n),s="",{config:i,_e:a}=t;const u=(t,e)=>{let l=(t=t||i.format)===m,r=l?bt(o):t===v?vt(n,!e):o;return e||l?{[t]:gt(r,t)}:r},p=(t,e,l,r)=>{i.opacity&&(l+="a");let n=r?[]:{};return l!==y&&(n.toString=()=>e||gt(t,l)),l.split("").reduce(((e,l,n)=>(e[r?n:l]=t[l],e)),n)};return{u(e,l,r){if(!i.disabled){E(n,e),o=r||wt(n),s=gt(o,b);let a=t._c,{palette:p,sliders:c,inputs:h}=a;R(a.preview.$,L,s),R(a.ref.$,L,s),(l||!P(e.a))&&R(c.alpha,b,o.r+","+o.g+","+o.b),P(e.h)&&R(p.$,"hue",n.h),l!==h&&h.D(u("",i.singleInput)),l&&(c.D(n),p.C(n))}},t(t,e){let l,r,{I:n,P:o}=Lt(t),s=u(o),i=!I(n,s);return i&&(o===v?r=(t=>{let e=t.s/100,l=t.l/100,r=l+e*V(l,1-l);return{h:t.h,s:r?2*(1-l/r):0,v:r,a:t.a}})(n):(l=n,r=(t=>{let e=t.r/255,l=t.g/255,r=t.b/255,n=O(e,l,r),o=n-V(e,l,r),s=0===n?0:o/n;return{h:j((360+60*(0===o?0:n===e?(l-r)/o%6:n===l?(r-e)/o+2:n===r?(e-l)/o+4:0))%360),s:s,v:n,a:j(100*t.a)/100}})(n)),this.u(r,e,l)),i},T(){C(u("",!0),(t=>{let e=navigator.clipboard;e?e.writeText(t):N(_,"",r,null,(e=>{e.value=t,e.select(),l.execCommand("copy"),K(e)}))}))},Z:{[y]:()=>p(n,"",y,!1),[b]:t=>p(o,s,b,t),[v]:t=>p(vt(n),"",v,t),[m]:()=>bt(o)},k(){e=u()},S(t){I(e,u())||a.i(f,t)}}};class Ot{static version="1.0.2";static defaults=Q;constructor(t,e){t=F(t);const l=this;l.config=E({},Ot.defaults,e),l._e=(t=>{const e={[i]:[],[a]:[],[f]:[],[u]:[]};return{i:(l,r)=>{!t.config.disabled&&e[l]&&e[l].forEach((e=>{l===u||l===f?e(t._s.Z,r||t):e()}))},q:(t,l)=>{e[t]&&e[t].push(l)},B:(t,l)=>{let r=e[t];r?e[t]=l?r.filter((t=>t!==l)):[]:null==t&&C(e,((t,l)=>{e[l]=[]}))}}})(l),l._s=Ht(l),l._c=$t(t,l),l._c.app.p(l.config)}setOptions(t){this._c.app.p(t)}isOpen(){return this._c.app.m()}open(){this._c.app.A()}close(){this._c.app.L()}toggle(){this._c.app.H()}on(t,e){this._e.q(t,e)}off(t,e){this._e.B(t,e)}setColor(t){let e,l=this;if(!z(t)&&(e=[b,v,y].find((e=>e.split("").every((e=>t[e]&&!isNaN(t[e]))))),e)){let r=t.a;t.a=null!=r?r:1,e===y&&(e=l.config.format,t.h=(t.h%360+360)%360,t.s=T(t.s)/100,t.v=T(t.v)/100,e===v?t=vt(t):(t=wt(t),e===m&&(t=bt(t)))),t=gt(t,e)}return l._s.t(t,!0),l}getColor(){return this._s.Z}addSwatch(t){this._c.swatches.F(t)}removeSwatch(t){this._c.swatches.N(t)}enable(){this._c.app.O(!1)}disable(){this._c.app.O(!0)}reset(){D(this,this.config.default)}reposition(){this._c.app.V()}trigger(t){this._e.i(t)}destroy(){let t=this,e=t._c;e.ref._({preset:!1}),C(e,(t=>{t.e.forEach((t=>{W(t,!0)}))})),C(t,((e,l)=>{delete t[l]}))}}return e=e.default}()}));
//# sourceMappingURL=alwan.min.js.map